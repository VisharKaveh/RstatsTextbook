<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.30">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>importingdata</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="ImpoRtingData_files/libs/clipboard/clipboard.min.js"></script>
<script src="ImpoRtingData_files/libs/quarto-html/quarto.js"></script>
<script src="ImpoRtingData_files/libs/quarto-html/popper.min.js"></script>
<script src="ImpoRtingData_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="ImpoRtingData_files/libs/quarto-html/anchor.min.js"></script>
<link href="ImpoRtingData_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="ImpoRtingData_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="ImpoRtingData_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="ImpoRtingData_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="ImpoRtingData_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">




<div class="cell">
<style type="text/css">
p {
  text-align: justify
}
</style>
</div>
<section id="importing-data-in-r" class="level1">
<h1>Importing data in R</h1>
<section id="chapter-overview" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="chapter-overview"><strong>Chapter overview</strong></h4>
<p>Many <code>R</code> textbooks postpone this section until much later. This is because they include practical tasks that typically rely on datasets that are directly accessible as <code>R</code> data objects. In real life, however, research data rarely comes neatly packaged as an <code>R</code> object. Your data will most likely be stored in a spreadsheet table or as a set of text files. And they will be more messy that you would like to admit…</p>
<p>This chapter will take you through the process of:</p>
<ul>
<li>Downloading data from a real applied linguistics study</li>
<li>Creating a Project in RStudio</li>
<li>Importing a dataset as an <code>R</code> object</li>
<li>Saving this <code>R</code> object for future use</li>
</ul>
<p>In future chapters, we will continue to work with this data and will learn how to “clean it up” for data analysis.</p>
</section>
<section id="accessing-data-from-a-real-applied-linguistics-study" class="level2">
<h2 class="anchored" data-anchor-id="accessing-data-from-a-real-applied-linguistics-study">Accessing data from a real applied linguistics study</h2>
<p>As we saw in Chapter *, it is good practice to share both the data and materials associated with research studies so that others can reproduce and replicate the research.</p>
<p>In the following chapters, we will focus on data associated with the following study:</p>
<blockquote class="blockquote">
<p>Dąbrowska, Ewa. 2019. Experience, Aptitude, and Individual Differences in Linguistic Attainment: A Comparison of Native and Nonnative Speakers. Language Learning 69(S1). 72–100. <a href="https://doi.org/10.1111/lang.12323" class="uri">https://doi.org/10.1111/lang.12323</a>.</p>
</blockquote>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/Dabrowska_Title.png" class="img-fluid figure-img" alt="Front page of an EMPIRICAL STUDY journal article published at Language Learning: Experience, Aptitude, and Individual Differences in Linguistic Attainment: A Comparison of Native and Nonnative Speakers by Ewa Dabrowska (University of Birmingham" width="461"></p>
<figcaption>Article title as printed in the journal Language Learning</figcaption>
</figure>
</div>
<p>Follow the DOI<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> link above and read the abstract to find out what the study was about. You do not need to have institutional or paid access to the full paper to read the abstract.</p>
<p><em>Quiz questions</em></p>
<pre><code>1) What kind of data was collected as part of this study? (check boxes, all of which are true)
- Participants' results on a grammar test
- Participants' resuls on a vocabulary test
- Participants' resuls on a collocations test
- Sociodemograhic information about the participants including their age and level of education
- Participants' results on a language analytic ability test 
- Participants' results on a nonverbal intelligence test 

2) On average, how did the English L2 speakers fare compared to the native speakers? a. On average, L2 speakers performed better on grammar tasks than native speakers. b. On average, native speakers outperformed L2 speakers on all language tasks, with the most significant difference observed in collocation tasks. c. On average, both groups performed equally well on grammar and vocabulary tasks. d. The observed differences in performance between native speakers and L2 speakers were not statistically significant.

3) In this study, did all native speakers perform better in the English vocabularly and grammar tests than the L2 speakers? a. Yes, the L1 speakers clearly outperformed L2 speakers in grammar and vocabulary. b. No, while L1 speakers generally performed better, some L2 speakers demonstrated equally high proficiency in grammar and vocabulary. c. This study only looked at average trends so that no conclusive statement can be made about any individual participants.</code></pre>
<p>Though this publication does have an Open Data badge (see *), the author has made the data used in this study available on an open repository. To find out on which repository, go back to the DOI link and click on the drop-down menu “Supporting Information”. It contains a link to a PDF file. Click on the link and scroll to the last page which contains the following information about the data associated with <span class="citation" data-cites="DabrowskaExperienceAptitudeIndividual2019">Dąbrowska (<a href="#ref-DabrowskaExperienceAptitudeIndividual2019" role="doc-biblioref">2019</a>)</span>:</p>
<blockquote class="blockquote">
<p>Appendix S4: Datasets</p>
<p>Dąbrowska, E. (2018). L1 data [Data set]. Retrieved from <a href="https://www.iris-database.org/details/9pplf-S7kw3">https://www.iris-database.org/iris/app/home/detail?id=york:935513</a></p>
<p>Dąbrowska, E. (2018). L2 data [Data set]. Retrieved from <a href="https://www.iris-database.org/details/L8w1U-ZDgnH">https://www.iris-database.org/iris/app/home/detail?id=york:935514</a></p>
</blockquote>
<p><em>Quiz question</em></p>
<pre><code>4\) On which repository/repositories can the data be found? a. Zenodo b. database.org c. IRIS d. ResearchGate e. All of the above. Hint: Check the links listed in Appendix S4.</code></pre>
<p>Click on the two links listed in Appendix S4 and download the two datasets. Save them in an appropriate place on your computer (see Chapter *), as we will continue to work with these two files in the following chapters.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
What’s a good place to save these files?
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>If you haven’t already done so, I suggest that you create a folder in which you save everything that you create whilst learning from this textbook. This folder could be called something along the lines of <code>DataLiteracyTextbook</code>, <code>2024_data_literacy</code>, or <code>LeFoll_2024_DataLiteracy</code>. Then, within this folder, I recommend that you create another folder called <code>Dabrowska2019</code> (note how I have not included the “ą” character in the folder name as this could cause problems), and within this folder, create another folder called <code>data</code>. This is the folder in which you can save these two files.</p>
</div>
</div>
</div>
<p><em>Quiz question</em></p>
<pre><code>6\) In which data format are these two files saved? a. They are both .csv files. b. They are both .txt files. c. They are both .html files. c. They are both .xslx files.</code></pre>
<p>Below are the first five lines of the file <code>Dabrowska_2018_L1_data.csv</code>, which contains the data about the study’s L1 participants.</p>
<pre><code>Participant,Age,Gender,Occupation,OccupGroup,OtherLgs,Education,EduYrs,ReadEng1,ReadEng2,ReadEng3,ReadEng,Active,ObjCl,ObjRel,Passive,Postmod,Q.has,Q.is,Locative,SubCl,SubRel,GrammarR,Grammar,VocabR,Vocab,CollocR,Colloc,Blocks,ART,LgAnalysis
1,21,M,Student,PS,None,3rd year of BA,17,1,2,2,5,8,8,8,8,8,8,6,8,8,8,78,95,48,73.33333333,30,68.75,16,17,15
2,38,M,Student/Support Worker,PS,None,NVQ IV Music Performance,13,1,2,3,6,8,8,8,8,8,8,7,8,8,8,79,97.5,58,95.55555556,35,84.375,11,31,13
3,55,M,Retired,I,None,No formal (City and Guilds),11,3,3,4,10,8,8,8,8,8,7,8,8,8,8,79,97.5,58,95.55555556,31,71.875,5,38,5
4,26,F,Web designer,PS,None,BA Fine Art,17,3,3,3,9,8,8,8,8,8,8,8,8,8,8,80,100,53,84.44444444,37,90.625,20,26,15</code></pre>
<p>This file is a delimiter-separated values (DSV) file.</p>
<p><em>Quiz question</em></p>
<pre><code>7\) Which character is used to separate the values in this DSV file? a. comma b. tab c. semi-colon d. colon e. space</code></pre>
</section>
<section id="using-projects-in-rstudio" class="level2">
<h2 class="anchored" data-anchor-id="using-projects-in-rstudio">Using Projects in RStudio</h2>
<p>One of the advantages of working with RStudio is that it allows us to harness the potential of Projects. RStudio Projects help us to keep our digital kitchen nice and tidy. Each project has its own directory, environment, and history which means that we can work on multiple projects at the same time and RStudio will keep them completely separate from each other. This means that we can easily switch between cooking different dishes, say a gluten-free egg curry and vegan pancakes, without fear of accidentally setting the wrong temperature on the cooker or contaminating either dishes.</p>
<p>But even if you don’t like multi-tasking (which is not recommended), RStudio Projects are a great way to help you keep together all the data, scripts, and outputs associated with a single project in an organised manner. In the long run, this will make your life much, much easier. It will also be an absolute lifesafer as soon as you need to share your work with others (e.g., your supervisor, colleague, reviewer, etc.).</p>
<p>To create a new Project, open RStudio. Select “File”, then “New Project…”. Alternatively, you can click on the Project button in the top-right corner of RStudio and then select “New Project…” <strong>(To do for Jan: add screenshot showing this second option)</strong>.</p>
<p>Both options will open up a window with three options for creating a new project:</p>
<ol type="1">
<li>New Directory (which allows you to create an entirely new project for which you do not yet have a folder on your computer)</li>
<li>Existing Directory (which allows you to create a project in an existing folder associated with your project)</li>
<li>Version Control (see <span class="citation" data-cites="bryanLetGitStarted">Bryan (<a href="#ref-bryanLetGitStarted" role="doc-biblioref">n.d.</a>)</span>).</li>
</ol>
<p>Given that you already saved the data that we want to import (from <span class="citation" data-cites="DabrowskaExperienceAptitudeIndividual2019">Dąbrowska (<a href="#ref-DabrowskaExperienceAptitudeIndividual2019" role="doc-biblioref">2019</a>)</span>) in a dedicated folder on your computer, you can select the second option: “Existing Directory”.</p>
<p>This will open up the following window. Click on “Browse…” to navigate to the folder corresponding to your <span class="citation" data-cites="DabrowskaExperienceAptitudeIndividual2019">Dąbrowska (<a href="#ref-DabrowskaExperienceAptitudeIndividual2019" role="doc-biblioref">2019</a>)</span> project. If you followed my suggestions earlier on, this would be a folder called something along the lines of: <code>Dabrowska2019</code>. Once you have selected this project folder on your computer, select the option “Open in a new session” and then click on “Create Project”.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/RStudioNewProject.png" class="img-fluid figure-img" alt="New Project Wizard for Create Project from Existing Directory R Project. It shows the working directory: /Users/lefoll/Documents. There are three buttons: Browse..., Create Project and Cancel" width="440"></p>
<figcaption>New project window <strong>(To do for Jan: redo this screenshot. It should show a new project being created in a folder called “Dabrowska2019”, itself saved in a folder called “<strong><code>DataLiteracyTextbook</code></strong>”). The checkbox should be ticked and red ellipses should circle the buttons that need to be clicked “Browse”, “tickbox” and “Create project”. Alt-text needs to be adjusted.)</strong></figcaption>
</figure>
</div>
<p>Creating an RStudio project will have generated a new file in your folder project called <code>Dabrowska2019.Rproj</code>. You can see it in the Files pane of RStudio (To for Jan: add screenshot showing this). Note that its file extension is <code>.Rproj</code>. Such <code>.Rproj</code> files contain information about your project options, which, in most cases, you will not need to edit.</p>
<p>More usefully, <code>.Rproj</code> files can be used as shortcuts for opening your projects. Shut down RStudio. Then, in your computer file system, navigate to your project folder, e.g., in a File Explorer window on Windows and a Finder window on macOS, to locate your <code>.Rproj</code> file. Double-click on the file to automatically launch RStudio with all the correct settings for this particular project. Alternatively, you can use the Project button to open up a project from RStudio itself.</p>
<p>The folder in which in the <code>.Rproj</code> file was created is your project’s working directory. You can see the path to this working directory at the top of the Console pane in RStudio <strong>(To do for Jan: Add ellipse on screenshot</strong>). The Files pane should also show the content of this directory. Click on the “New Folder” icon in your Files pane <strong>(To do for Jan: Add ellipse on screenshot</strong>) to create a new subfolder called <code>analysis</code>.</p>
<p>Your folder <code>Dabrowska2019</code> should now contain an <code>.RProj</code> file and two subfolders called <code>analysis</code> and <code>data</code>. Click on the analysis folder to open it and then click on “New Script” icon <strong>(To do for Jan: Add ellipse on second screenshot</strong>) and select “R Script”. This will open a new, empty <code>R</code> script in your Source pane. It is best to always begin by saving a newly created file. Save this empty script with a computer- and human-friendly file name such as as <code>1_DataImport.R</code>.</p>
<p>Given that we want to import two <code>.csv</code> files, we are going to need to use the base <code>R</code> function <code>read.csv()</code>. You can find out what this function does by typing <code>?read.csv</code> or <code>help(read.csv)</code> in the Console to open up the documentation. This help file contains information about several functions used to import data. Scroll down to the information about the <code>read.csv()</code> function. It reads:</p>
<pre><code>read.csv(file, header = TRUE, sep = ",", quote = "\"",
         dec = ".", fill = TRUE, comment.char = "", ...)</code></pre>
<p>This informs us that this function’s first argument is the path to the file from which we want to import the data. It is the only argument that does not have a default value and is therefore the only argument that is compulsory.</p>
<p>In theory, therefore, all we need to write to import the data is:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>L1.data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="at">file =</span> <span class="st">"data/Dabrowska_2018_L1_data.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The file path <code>"data/Dabrowska_2018_L1_data.csv"</code> informs <code>R</code> that the data is located in a subfolder of the project’s working directory called <code>data</code> and that, within this subfolder, the file that we want to import is called <code>Dabrowska_2018_L1_data.csv</code>.</p>
<p>In practice, however, it is often safest to spell things out to remind ourselves of some of the default settings of the function in case they need changing:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>L1.data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="at">file =</span> <span class="st">"data/Dabrowska_2018_L1_data.csv"</span>,</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>                    <span class="at">header =</span> <span class="cn">TRUE</span>,</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>                    <span class="at">sep =</span> <span class="st">","</span>,</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>                    <span class="at">quote =</span> <span class="st">"</span><span class="sc">\"</span><span class="st">"</span>,</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>                    <span class="at">dec =</span> <span class="st">"."</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="quick-and-dirty-ways-to-import-data-in-r" class="level2">
<h2 class="anchored" data-anchor-id="quick-and-dirty-ways-to-import-data-in-r">Quick-and-dirty ways to import data in R</h2>
</section>
<section id="hardcoding-file-paths-in-r-scripts" class="level2">
<h2 class="anchored" data-anchor-id="hardcoding-file-paths-in-r-scripts">Hardcoding file paths in <code>R</code> scripts</h2>
<p>Copy-and-paste path</p>
</section>
<section id="loading-data-using-rstudio" class="level2">
<h2 class="anchored" data-anchor-id="loading-data-using-rstudio">Loading data using RStudio</h2>
</section>
<section id="section" class="level2 unnumbered">


</section>
</section>


<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-bryanLetGitStarted" class="csl-entry" role="listitem">
Bryan, Jennifer. n.d. <em>Let’s Git Started | Happy Git and GitHub for the useR</em>. Open Education Resource. <a href="https://happygitwithr.com/">https://happygitwithr.com/</a>.
</div>
<div id="ref-DabrowskaExperienceAptitudeIndividual2019" class="csl-entry" role="listitem">
Dąbrowska, Ewa. 2019. <span>“Experience, Aptitude, and Individual Differences in Linguistic Attainment: A Comparison of Native and Nonnative Speakers.”</span> <em>Language Learning</em> 69 (S1): 72–100. <a href="https://doi.org/10.1111/lang.12323">https://doi.org/10.1111/lang.12323</a>.
</div>
<div id="ref-parsonsCommunitysourcedGlossaryOpen2022" class="csl-entry" role="listitem">
Parsons, Sam, Flávio Azevedo, Mahmoud M. Elsherif, Samuel Guay, Owen N. Shahim, Gisela H. Govaart, Emma Norris, et al. 2022. <span>“A Community-Sourced Glossary of <span class="nocase">open</span> <span class="nocase">scholarship</span> Terms.”</span> <em>Nature Human Behaviour</em> 6 (3): 312–18. <a href="https://doi.org/10.1038/s41562-021-01269-4">https://doi.org/10.1038/s41562-021-01269-4</a>.
</div>
</div></section><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>“Digital Object Identifiers (DOI) are alpha-numeric strings that can be assigned to any entity, including: publications (including preprints), materials, datasets, and feature films - the use of DOIs is not restricted to just scholarly or academic material. DOIs “provides a system for persistent and actionable identification and interoperable exchange of managed information on digital networks.” (<a href="https://doi.org/hb.html%29">https://doi.org/hb.html)</a>. There are many different DOI registration agencies that operate DOIs, but the two that researchers would most likely encounter are Crossref and Datacite.” <span class="citation" data-cites="parsonsCommunitysourcedGlossaryOpen2022">(<a href="#ref-parsonsCommunitysourcedGlossaryOpen2022" role="doc-biblioref">Parsons et al. 2022</a>)</span><a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>